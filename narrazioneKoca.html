<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>Narrazione</title>
  </head>
  <body>
    <div class = "container w-80">
        <div class="row gx-5">
            <div class="col-sm border" style = "border-radius: 0.7rem; background-color: lightgrey; box-shadow: 0.2rem 0.1rem 0.1rem grey;">
                <p id = "testo"></p>
            </div>
            <div class="col-sm" style = "border-radius: 0.7rem; background-color: lightgrey; box-shadow: 0.2rem 0.1rem 0.1rem grey;margin-left: 1rem;">
                <form>
                    <div class="form-group">
                    <label>Soggetto oppresso</label>
                    <input type="text" class="form-control" id="soggetto" placeholder="Soggetto oppresso" oninput = "update()">
                    <small class="form-text text-muted">Text</small>
                    </div>

                    <div class="form-group">
                        <label>Oppressore</label>
                        <input type="text" class="form-control" id="oppressore" placeholder="Soggetto Oppressore" oninput = "update()">
                        <small class="form-text text-muted">Text</small>
                    </div>

                    <div class="form-group">
                        <label>Situazione</label>
                        <input type="text" class="form-control" id="situazione" placeholder="Situazione" oninput = "update()">
                        <small class="form-text text-muted">Text</small>
                    </div>

                    <div class="form-group">
                        <label>Motivazione</label>
                        <input type="text" class="form-control" id="motivazione" placeholder="Motivazione" oninput = "update()">
                        <small class="form-text text-muted">Text</small>
                    </div>

                    <div class="form-group">
                        <label>Feedback</label>
                        <input type="text" class="form-control" id="feedback" placeholder="Feedback" oninput = "update()">
                        <small class="form-text text-muted">Text</small>
                    </div>

                    <div class="form-group">
                        <label>Comportamento adeguato</label>
                        <input type="text" class="form-control" id="adeguato" placeholder="Comportamento adeguato" oninput = "update()">
                        <small class="form-text text-muted">Text</small>
                    </div>

                    <div class="form-group">
                        <label>Comportamento inadeguato</label>
                        <input type="text" class="form-control" id="inadeguato" placeholder="Comportamento inadeguato" oninput = "update()">
                        <small class="form-text text-muted">Text</small>
                    </div>

                    <div class="form-group">
                        <label>Conseguenze</label>
                        <input type="text" class="form-control" id="conseguenze" placeholder="Conseguenze negative" oninput = "update()">
                        <small class="form-text text-muted">Text</small>
                    </div>
                </form>
            </div>
        </div>
    </div>
      

      <script>
        update(); 
        //Note:  String.fromCodePoint(int) prende un intero e lo converte nel suo carattere corrispondente in Unicode
        //Ho usato l'operatore ternario per assegnare il valore alle singole "parole" del testo. In molti casi (soggetto, obiettivo) sarebbe possibile assegnare ad un'altra variabile l'intera espressione tra ${} e riutilizzare quella variabile invece di chiamare pi√π volte le funzioni per ogni singola esecuzione
        function update(){
            //const  = document.querySelector("#testo").value != "" ? document.querySelector("#testo").value : document.querySelector("#testo").placeholder;
            const txtField = document.querySelector("#testo");
            const soggettoText = document.querySelector("#soggetto") != "" ? document.querySelector("#soggetto").value.toUpperCase() : document.querySelector("#soggetto").getAttribute("placeholder").toUpperCase();
            const oppressoreText = document.querySelector("#oppressore") != "" ? document.querySelector("#oppressore").value.toUpperCase() : document.querySelector("#oppressore").getAttribute("placeholder").toUpperCase();
            const situazioneText = document.querySelector("#situazione") != "" ? document.querySelector("#situazione").value.toUpperCase() :  document.querySelector("#situazione").getAttribute("placeholder").toUpperCase();
            const motivazioneText = document.querySelector("#motivazione") != "" ? document.querySelector("#motivazione").value.toUpperCase() : document.querySelector("#motivazione").getAttribute("placeholder").toUpperCase();
            const feedbackText = document.querySelector("#feedback") != "" ? document.querySelector("#feedback").value.toUpperCase() : document.querySelector("#feedback").getAttribute("placeholder").toUpperCase();
            const adeguatoText = document.querySelector("#adeguato") != "" ? document.querySelector("#adeguato").value.toUpperCase() : document.querySelector("#feedback").getAttribute("placeholder").toUpperCase();
            const inadeguatoText = document.querySelector("#inadeguato") != "" ? document.querySelector("#inadeguato").value.toUpperCase() : document.querySelector("#inadeguato").getAttribute("placeholder").toUpperCase();
            const conseguenzeText = document.querySelector("#conseguenze") != "" ? document.querySelector("#conseguenze").value.toUpperCase() : document.querySelector("#inadeguato").getAttribute("placeholder").toUpperCase();
            console.log(document.querySelector("#soggetto").getAttribute("placeholder"));
            txtField.innerText = `${soggettoText} vuoi reagire ad oppressione di ${oppressoreText}? NO!\n Mancando ${motivazioneText} per reagire a ${oppressoreText}. ${soggettoText} nel contesto ${situazioneText} rimarrai oppresso!\n${soggettoText} vuoi reagire? SI!\nQuale opzione scegli?\nATTENZIONE! Scegliendo ${inadeguatoText} ti allontani dal mandare un ${feedbackText} efficace.\nTi sei allontanato troppo e ti sei scontrato con ${conseguenzeText}.\n\n${soggettoText} quale scelta farai questa volta?\n${soggettoText} la scelta ${adeguatoText} ti avvicina all'invio di un ${feedbackText} adeguato a ${oppressoreText}. Coraggio fai l'ultimo passo!`;

        }
      </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>